//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "Unit3.h"
#include "ISOAPServis.h"
#include "isbnservice.h"

//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TFormUnosKnjige *FormUnosKnjige;
//---------------------------------------------------------------------------
__fastcall TFormUnosKnjige::TFormUnosKnjige(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------
void __fastcall TFormUnosKnjige::btnGenerirajClick(TObject *Sender)
{
	_di_ISOAPServis soapInt = GetISOAPServis();
	_di_ISBNServiceSoapType soapWeb = GetISBNServiceSoapType();

//	editISBN10->Text = soapInt->generiranjeISBN(editISBNDevet->Text);
	int suma = 0;
//	ShowMessage(editISBNDevet->Text.SubString(0+1,).ToInt());


	for (int i = 0; i < 9; i++) {
		int broj = editISBNDevet->Text.SubString(i+1, 1).ToInt();
		ShowMessage(broj);
		suma = suma + (broj * (10 - i));
	}

	String validniIsbn = (String)suma + (String)(11 - (suma % 11));
    ShowMessage(validniIsbn);

	ShowMessage(soapWeb->IsValidISBN10((suma % 11)));
	ShowMessage(suma % 11);
	ShowMessage(11 - (suma % 11));
}
//---------------------------------------------------------------------------


